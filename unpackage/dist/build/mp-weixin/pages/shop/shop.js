(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/shop"],{"0ea1":function(t,o,e){"use strict";var n=e("ca7d"),i=e.n(n);i.a},"13bf":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=(t._self._c,(t.popupData.price/100*t.num18).toFixed(2));t.$mp.data=Object.assign({},{$root:{g0:e}})},i=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return i})},3828:function(t,o,e){"use strict";(function(t){e("7b40"),e("921b");n(e("66fd"));var o=n(e("ac09"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"6e0f":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"3946"))},i=function(){return e.e("components/counter/counter").then(e.bind(null,"84bc"))},u={components:{uniPopup:n,counter:i},data:function(){return{title:"Hello",num17:1,num18:1,pageNo:1,pageSize:6,shopId:"",product:[],popupData:{},size:"未选择",skus:[],skusId:0,trolleyNum:0}},onShow:function(){this.getTrolleyNum()},onLoad:function(){this.getProduct(),this.getTrolleyNum()},methods:{chooseSize:function(t,o){this.popupData.specification[t].focus=o,this.priceCal()},getTrolleyNum:function(){var t=this;this.$ajax("/cart/getCart","POST",{}).then(function(o){t.trolleyNum=o.cartItems.length})},buy17:function(t){this.$refs.counter.setNum(1),this.popupData=t,this.skusId=0,this.size="未选择",this.$refs.popup.open()},close17:function(){this.$refs.popup.close()},trolley:function(){t.navigateTo({url:"/pages/shop/trolley"})},detail17:function(o){t.navigateTo({url:"/pages/shop/detail?id="+o.id})},atrolley:function(){},priceCal:function(){var o=this;this.skus=[],t.showLoading({title:"计算中",mask:"true"}),o.size="",0!=o.popupData.skus.length&&(o.popupData.specification.map(function(t){t.entries.map(function(e,n){if(t.focus==n){var i={id:e.id,value:e.value};o.size=o.size+" "+e.value,o.skus.push(i)}})}),setTimeout(function(){console.log(o.skus),o.popupData.skus.map(function(t){console.log(t.specificationValues),t.specificationValues==JSON.stringify(o.skus)&&(o.popupData.price=t.price,o.skusId=t.id,console.log(o.popupData.price))}),setTimeout(function(){t.hideLoading()},888)},999))},setNum:function(o){"未选择"==this.size?(t.showToast({title:"请先选择规格",icon:"none"}),this.$refs.counter.setNum(1)):(this.num18=o,this.priceCal())},addTrolley:function(){var o=this;0!=o.skusId?this.$ajax("/cart/add","POST",{skuId:o.skusId,count:o.num18}).then(function(e){e?(t.showToast({title:"添加成功，商品正在购物车等着你呢",icon:"none"}),o.getTrolleyNum(),o.$refs.popup.close()):(t.showToast({title:"添加失败",icon:"none"}),o.$refs.popup.close())}):t.showToast({title:"请选择规格",icon:"none"})},getProduct:function(){var o=this;this.$ajax("/product/page","POST",{pageNo:this.pageNo,pageSize:o.pageSize}).then(function(e){console.log(e),e&&(t.showToast({title:"加载成功",icon:"none"}),e.list.map(function(t){t.specification=JSON.parse(t.specification),o.product.push(t)}),console.log(o.product),o.pageNo=o.pageNo+1,console.log(o.pageNo))})}}};o.default=u}).call(this,e("543d")["default"])},a135:function(t,o,e){"use strict";e.r(o);var n=e("6e0f"),i=e.n(n);for(var u in n)"default"!==u&&function(t){e.d(o,t,function(){return n[t]})}(u);o["default"]=i.a},ac09:function(t,o,e){"use strict";e.r(o);var n=e("13bf"),i=e("a135");for(var u in i)"default"!==u&&function(t){e.d(o,t,function(){return i[t]})}(u);e("0ea1");var s=e("2877"),a=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);o["default"]=a.exports},ca7d:function(t,o,e){}},[["3828","common/runtime","common/vendor"]]]);