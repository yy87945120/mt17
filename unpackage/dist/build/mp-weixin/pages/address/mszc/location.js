(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/mszc/location"],{"0b5b":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},"7abf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("8715"),a=function(){return n.e("components/jsfun-record/jsfun-record").then(n.bind(null,"f853"))},i=function(){return n.e("components/an-uploadImg/an-uploadImg").then(n.bind(null,"758d"))},r=function(){return n.e("components/banner/banner").then(n.bind(null,"5242"))},u={components:{anUploadImg:i,jsfunRecord:a,banner:r},data:function(){return{title:"Hello",map:{longitude:0,latitude:0,address:"",locationName:"",floor:"",parkNo:"",imgs:[],record:""},markers:[{title:"",latitude:39.9085,longitude:116.39747,label:{content:"文本1",color:"#F76350",bgColor:"#fff",padding:5,borderRadius:4}}],voicePath:""}},onLoad:function(t){t.status;var n=this,a=new o.AMapWX({key:"480fe41eddd896896634c36549b171df"});a.getRegeo({success:function(e){n.map.longitude=e[0].longitude,n.map.latitude=e[0].latitude,n.map.address=e[0].name,n.map.locationName=e[0].desc,n.markers[0].title=e[0].name,n.markers[0].latitude=e[0].latitude,n.markers[0].longitude=e[0].longitude,n.markers[0].label.content=e[0].name},fail:function(t){e.showModal({title:JSON.stringify(t)})}})},methods:{toUrl:function(t){e.navigateTo({url:t})},refreshImageList:function(e){this.map.imgs=e,console.log(this.map.imgs)},saveRecord:function(t){var n=this;console.log(t),this.voicePath=t;var o=e.getStorageSync("token");e.uploadFile({url:"https://majieda.rng1021.top/mjd/uploadFile",filePath:t,name:"file",header:{Authorization:o},success:function(t){e.showToast({title:"录音上传成功",icon:"none"}),n.map.record=JSON.parse(t.data).url,console.log(n.map)}})},getLocation:function(){var t=this;e.chooseLocation({success:function(n){if(console.log(n),!n.name)return e.showToast({icon:"none",title:"请选择地图下面的地址，并且按确认"}),void setTimeout(function(){t.getLocation()},1477);t.map.longitude=n.longitude,t.map.latitude=n.latitude,t.map.address=n.name,t.map.description=n.address,t.markers[0].title=n.name,t.markers[0].latitude=n.latitude,t.markers[0].longitude=n.longitude,t.markers[0].label.content=n.name},fail:function(){e.showToast({icon:"none",title:"如果无法获取准确的定位信息，请打开GPS导航系统"})}})},preview:function(t,n){var o=this,a="";a=o.map.imgs,e.previewImage({urls:a})},apply:function(){if(0==this.map.longitude||0==this.map.latitude||""==this.map.address||""==this.map.locationName)return e.showToast({title:"你的定位信息不全，请重新定位",icon:"none"}),!1;console.log(this.map),this.$ajax("/park/apply","POST",this.map).then(function(t){console.log(t),e.reLaunch({url:"/pages/address/mszc/index"})})}}};t.default=u}).call(this,n("543d")["default"])},9052:function(e,t,n){"use strict";n.r(t);var o=n("0b5b"),a=n("bc73");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("ce26");var r=n("2877"),u=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=u.exports},b235:function(e,t,n){"use strict";(function(e){n("7b40"),n("921b");o(n("66fd"));var t=o(n("9052"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},bc73:function(e,t,n){"use strict";n.r(t);var o=n("7abf"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=a.a},ce26:function(e,t,n){"use strict";var o=n("e480"),a=n.n(o);a.a},e480:function(e,t,n){}},[["b235","common/runtime","common/vendor"]]]);